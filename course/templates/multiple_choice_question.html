{% extends 'base.html' %}
{% load static %}

{% block script %}
    <link rel="stylesheet" href="{% static 'highlight/9.18.1/styles/default.min.css' %}"/>
    <script src="{% static 'highlight/9.18.1/highlight.min.js' %}"></script>
    <script>hljs.initHighlightingOnLoad();</script>
{% endblock %}

{% block content %}

    <div class="card">
        <div class="card-header"><h1>{{ question.title }}</h1></div>
        <div class="card-body">
            <div>{% autoescape off %}{{ statement }}{% endautoescape %}</div>
        </div>
    </div>

    <div class="card my-1">
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                {% for key, text in choices.items %}
                    <div class="form-group">
                        <input type="radio" id="answer-{{ key }}" name="answer" value="{{ key }}">
                        <label for="answer-{{ key }}">{{ text }}</label>
                    </div>
                {% endfor %}
                <div class="form-group row ml-0">
                    <button type="submit" class="btn btn-success"> Submit</button>
                </div>
            </form>
        </div>
    </div>

    <h2>My Past Submissions</h2>
    <table class="table table-hover">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Answer</th>
            <th scope="col">Grade</th>
            <th scope="col">Status</th>
        </tr>
        </thead>
        <tbody>
        {% for submission in submissions reversed %}
            <tr class="{% if submission.is_correct %}table-success{% endif %}{% if not submission.is_correct %}table-danger{% endif %}">
                <th scope="row">{{ forloop.revcounter }}</th>
                <td>{{ submission.answer_display }}</td>
                <td>{{ submission.grade | floatformat:2 }}</td>
                <td>{{ submission.status }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}